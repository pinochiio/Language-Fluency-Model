<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Fluency</title>
    <!-- awesome text -->
    <script src="https://kit.fontawesome.com/5be4b20584.js" crossorigin="anonymous"></script>
    <!-- google fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Candal&family=Lora:ital,wght@0,400..700;1,400..700&display=swap" rel="stylesheet">
    <!-- custom styling -->
    <style>
        body {
    font-family: 'Candal', sans-serif;
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    height: 100vh;
    margin: 0;
    background: linear-gradient(to bottom right, #a4c671c1, #a6e3e2), url("https://media.istockphoto.com/id/1341803072/vector/happy-business-employee-team-winners-award-ceremony-flat-style-design-vector-illustration.jpg?s=1024x1024&w=is&k=20&c=V5iq4DEdhwZFn3HxUi4Jzu82OnDW6ikbadbIqQ4yjIs=");
    background-size: cover;
    color: #fff;
    text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.5);
    position: relative;
}

.container {
    text-align: center;
}

.container h1 {
    margin-top: 0;
    font-size: 48px;
    letter-spacing: 2px;
}

.form-group {
    margin-top: 20px;
}

label {
    display: block;
    font-weight: bold;
    font-size: 24px;
    margin-bottom: 10px;
}

.result {
    font-size: 72px;
    margin-top: 20px;
    animation: bounce 1s ease-in-out infinite alternate;
}

@keyframes bounce {
    0% {
        transform: translateY(0);
    }
    100% {
        transform: translateY(-20px);
    }
}

.hint {
    font-size: 18px;
    margin-top: 20px;
    color: #f8f8f8;
    text-shadow: none;
}

.trophy-icon {
    font-size: 64px;
    margin-top: 20px;
}

.trophy-icon i {
    color: #f7dc69;
}

.confetti {
    position: absolute;
    width: 100%;
    height: 100%;
    top: 0;
    left: 0;
    z-index: -1;
    pointer-events: none;
    overflow: hidden;
}

.confetti:before,
.confetti:after,
.confetti2:before,
.confetti2:after {
    content: '';
    position: absolute;
    width: 15px;
    height: 15px;
    border-radius: 50%;
    z-index: 0;
}

.confetti:before,
.confetti:after {
    background: #f7dc69;
}

.confetti2:before,
.confetti2:after {
    background: #ff6347;
}

.confetti:before {
    box-shadow: 100px 100px 0 -10px rgba(255, 255, 0, 0.3), 200px 200px 0 -10px rgba(0, 255, 255, 0.3),
        300px 300px 0 -10px rgba(0, 0, 255, 0.3), 400px 400px 0 -10px rgba(255, 0, 255, 0.3);
    animation: fall 10s infinite linear;
}

.confetti:after {
    box-shadow: 100px 100px 0 -10px rgba(255, 0, 255, 0.3), 200px 200px 0 -10px rgba(0, 255, 255, 0.3),
        300px 300px 0 -10px rgba(255, 255, 0, 0.3), 400px 400px 0 -10px rgba(0, 0, 255, 0.3);
    animation: fall 10s infinite linear;
}

.confetti2:before {
    box-shadow: 150px 150px 0 -10px rgba(255, 99, 71, 0.3), 250px 250px 0 -10px rgba(255, 99, 71, 0.3),
        350px 350px 0 -10px rgba(255, 99, 71, 0.3), 450px 450px 0 -10px rgba(255, 99, 71, 0.3);
    animation: fall 10s infinite linear;
}

.confetti2:after {
    box-shadow: 150px 150px 0 -10px rgba(255, 99, 71, 0.3), 250px 250px 0 -10px rgba(255, 99, 71, 0.3),
        350px 350px 0 -10px rgba(255, 99, 71, 0.3), 450px 450px 0 -10px rgba(255, 99, 71, 0.3);
    animation: fall 10s infinite linear;
}
.alert {
            padding: 5px;
            margin-bottom: 10px;
            border-radius: 5px;
        }
        .alert-success {
            background-color: #d4edda;
            color: #155724;
            border: 1px solid #c3e6cb;
        }
        .alert-danger {
            background-color: #f8d7da;
            color: #721c24;
            border: 1px solid #f5c6cb;
        }
  #flash-messages {
            position: fixed;
            top: 10px;
            right: 5px;
            width: 250px;
            background-color: #f8d7da;
            border: 1px solid #f5c6cb;
            color: #721c24;
            padding: 10px;
            border-radius: 5px;
            animation: slideInDown 0.5s ease-in-out;
        }

        /* Animation for flashed messages */
  @keyframes slideInDown {
            from {
                top: -100px;
                opacity: 0;
            }
            to {
                top: 10px;
                opacity: 1;
            }
        }

@keyframes fall {
    0% {
        transform: translateY(-100vh) rotate(0deg);
    }
    100% {
        transform: translateY(100vh) rotate(360deg);
    }
}


    </style>>
</head>
<body>
    <div class="container">
        <h1>Fluency Assessment</h1>
        <div class="trophy-icon">
            <i class="fas fa-trophy"></i>
        </div>  
        <div class="form-group">
            <label for="speech-text">Your fluency level:</label>
            <div class="result">
            <label for="speech-text">{{ accuracy }}</label><br/>
            <!-- Add a hidden input field to store accuracy value -->
            <input type="hidden" id="accuracy-input" value="{{ accuracy }}">
        </div>
            <p class="hint">Congratulations! Keep up the good work!</p>
            <!-- <textarea id="speech-text" rows="1">{{accuracy}}</textarea> -->
        </div>
        <div class="confetti"></div>
    </div>
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            var accuracy = document.getElementById('accuracy-input').value;
            var data = { fluency: accuracy };

            fetch('/add_fluency', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json',
                    'Accept': 'application/json'
                },
                body: JSON.stringify(data)
            })
            .then(response => response.json())
            .then(data => console.log(data))
            .catch(error => console.error('Error:', error));
        });
    </script>
    <div id="flash-messages">
        {% with messages = get_flashed_messages(with_categories=true) %}
            {% if messages %}
                {% for category, message in messages %}
                    <div class="alert alert-{{ category }}">{{ message }}</div>
                {% endfor %}
            {% endif %}
        {% endwith %}
    </div>
</body>
</html>
